| package |
package := Package name: 'Midi'.
package paxVersion: 2;
	preDeclareClassesOnLoad: false;
	basicComment: ''.


package setClassNames: #(
	#{MidiConstants}
	#{MIDIOut}
	#{MidiOutChannel}
).

package setMethodNames: #(
	#(#{WinMMLibrary} #midiOutCloseHmo:)
	#(#{WinMMLibrary} #midiOutGetNumDevs)
	#(#{WinMMLibrary} #midiOutOpenLphmo:uDeviceID:dwCallback:dwCallbackInstance:dwFlags:)
	#(#{WinMMLibrary} #midiOutShortMsgHmo:dwMsg:)
).

package setPrerequisites: #(
	'..\..\..\Dolphin\Base\Dolphin'
).

package!

"Class Definitions"!

SharedPool subclass: #MidiConstants
	instanceVariableNames: ''
	classVariableNames: ''
	imports: #()
	classInstanceVariableNames: ''
	classConstants: {
		'MidiChannelNoteOff' -> 16r8.
		'MidiChannelNoteOn' -> 16r9.
		'MidiControlChange' -> 16rB.
		'MidiProgramChange' -> 16rC
	}!
Object subclass: #MIDIOut
	instanceVariableNames: 'handle'
	classVariableNames: ''
	imports: #(#{MidiConstants})
	classInstanceVariableNames: ''
	classConstants: {}!
Object subclass: #MidiOutChannel
	instanceVariableNames: 'midiout noteProcess octaveShift'
	classVariableNames: ''
	imports: #()
	classInstanceVariableNames: ''
	classConstants: {}!

"Loose Methods"!

!WinMMLibrary methodsFor!

midiOutCloseHmo: hmo
	"cdemers - 9/3/2004"

	"Private Declare Function midiOutClose Lib 'winmm.dll' (ByVal hMidiOut As Long) As Long"

	"MMRESULT midiOutClose(
  HMIDIOUT hmo  
);"

	<stdcall: dword midiOutClose dword>
	^self invalidCall: _failureCode!

midiOutGetNumDevs
	"cdemers - 9/3/2004"

	"UINT midiOutGetNumDevs(VOID); "

	<stdcall: dword midiOutGetNumDevs>
	^self invalidCall: _failureCode!

midiOutOpenLphmo: midiOutHandle uDeviceID: uDeviceID dwCallback: dwCallback dwCallbackInstance: dwCallbackInstance dwFlags: dwFlags
	"cdemers - 9/3/2004"

	"Private Declare Function midiOutOpen Lib 'winmm.dll' (lphMidiOut As Long, ByVal uDeviceID As Long, ByVal dwCallback As Long, ByVal dwInstance As Long, ByVal dwFlags As Long) As Long"

	"MMRESULT midiOutOpen(
  LPHMIDIOUT lphmo,              
  UINT_PTR   uDeviceID,          
  DWORD_PTR  dwCallback,         
  DWORD_PTR  dwCallbackInstance, 
  DWORD      dwFlags             
);"

	<stdcall: dword midiOutOpen dword* dword dword dword dword>
	^self invalidCall: _failureCode!

midiOutShortMsgHmo: hmo dwMsg: dwMsg
	"cdemers - 9/3/2004"

	"Private Declare Function midiOutShortMsg Lib 'winmm.dll' (ByVal hMidiOut As Long, ByVal dwMsg As Long) As Long"

	"MMRESULT midiOutShortMsg(
		  HMIDIOUT hmo,  
		  DWORD dwMsg);"

	<stdcall: dword midiOutShortMsg dword dword>
	^self invalidCall: _failureCode! !
!WinMMLibrary categoriesFor: #midiOutCloseHmo:!public! !
!WinMMLibrary categoriesFor: #midiOutGetNumDevs!public! !
!WinMMLibrary categoriesFor: #midiOutOpenLphmo:uDeviceID:dwCallback:dwCallbackInstance:dwFlags:!public! !
!WinMMLibrary categoriesFor: #midiOutShortMsgHmo:dwMsg:!public! !

"End of package definition"!

